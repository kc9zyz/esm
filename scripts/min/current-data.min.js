var opts={lines:12,angle:.15,lineWidth:.33,pointer:{length:.54,strokeWidth:.035,color:"#000000"},limitMax:"false",colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0",generateGradient:true};getCurrentData=function(caller){$.ajax({url:"data/?asset=current-data",success:function(result){updateGauge(caller,result.output)},error:function(jq,err){console.log(err)}})};var target=document.getElementById("current-data-gauge");resizeGauge=function(){var container=document.getElementById("wattCol");target.height=container.offsetHeight*.4;target.width=container.offsetWidth};updateGauge=function(caller,level){if(typeof updateGauge.firstTime=="undefined"){updateGauge.firstTime=1}if(caller=="waypoint"&&updateGauge.firstTime==1){updateGauge.firstTime=0;this.gauge=new Gauge(target).setOptions(opts);this.gauge.maxValue=7e3;this.gauge.animationSpeed=13;this.gauge.setTextField(document.getElementById("current-data-textfield"));this.gauge.set(0);this.gauge.animationSpeed=13;this.gauge.set(level);setInterval(function(){getCurrentData("time")},1e4)}else if(caller=="time"&&updateGauge.firstTime==0){if(this.gauge.value!=level){this.gauge.animationSpeed=1;this.gauge.set(level)}}};getCurrentData("waypoint");
