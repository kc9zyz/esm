var opts={lines:12,angle:.15,lineWidth:.33,pointer:{length:.54,strokeWidth:.035,color:"#000000"},limitMax:"false",colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0",generateGradient:true};var energy={"Cell Phone Chargers":10,"QuickCharge™ 2.0 Chargers":25,Laptops:70,"Window AC Units":600,Refrigerators:200,"Washing Machines":700,Microwaves:1500,Blenders:750,Toasters:1e3,"Easy Bake Ovens":100,"George Foreman Grills":760,Dishwashers:1200,"Panini Presses":1400,"Quesadilla Makers":900,"Waffle Irons":1e3,"Pancake Skillets":1e3,"Space Heaters":1500};getEnergyExample=function(output){var energyArray=Array();for(key in energy){if(key!=this.previousExample){energyArray.push([key,energy[key]])}}for(var i=0;i<1e3;i++){var first=Math.floor(Math.random()*energyArray.length);var second=Math.floor(Math.random()*energyArray.length);var temp=energyArray[first];energyArray[first]=energyArray[second];energyArray[second]=temp}do{var chosenOne=energyArray.pop();if(!chosenOne){break}}while(chosenOne[1]>output);if(chosenOne){var numberPowered=Math.floor(output/chosenOne[1]);$("#energyComp").html(""+numberPowered+" "+chosenOne[0])}else{$("#energyComp").html("None of the devices on our list without batteries")}};getCurrentData=function(caller){$.ajax({url:"data/?asset=current-data",success:function(result){var more=[result.totalOutput,result.panelAngle,result.heading];updateGauge(caller,result.panelOutput,result.shingleOutput,more,result.timestamp)},error:function(jq,err){console.log(err)}})};var targetPanel=document.getElementById("current-data-panel");var targetShingle=document.getElementById("current-data-shingle");updateGauge=function(caller,panel,shingle,more,time){if(typeof updateGauge.firstTime=="undefined"){updateGauge.firstTime=1}if(caller=="waypoint"&&updateGauge.firstTime==1){updateGauge.firstTime=0;this.gauge1=new Gauge(targetPanel).setOptions(opts);this.gauge2=new Gauge(targetShingle).setOptions(opts);this.gauge1.maxValue=400;this.gauge2.maxValue=400;this.gauge1.animationSpeed=13;this.gauge2.animationSpeed=13;this.gauge1.setTextField(document.getElementById("current-data-panel-textfield"));this.gauge2.setTextField(document.getElementById("current-data-shingle-textfield"));this.gauge1.set(0);this.gauge2.set(0);if(!isNaN(panel)&&!isNaN(shingle)){this.gauge1.set(panel);this.gauge2.set(shingle)}setInterval(function(){getCurrentData("time")},1e4)}else if(caller=="time"&&updateGauge.firstTime==0){if(this.gauge1.value!=panel){this.gauge1.animationSpeed=1;this.gauge1.set(panel)}if(this.gauge2.value!=shingle){this.gauge2.animationSpeed=1;this.gauge2.set(shingle)}}$("#totalWatts").html(""+more[0]+" W");$("#panelAngle").html(""+more[1]+" °");$("#heading").html(""+more[2]+" °");getEnergyExample(more[0]);a=new Date(time);b=new Date;if(b-a>20*60*1e3){$("#system-live").html("System was last live "+a.toLocaleString())}else{$("#system-live").html("System is live")}};getCurrentData("waypoint");
