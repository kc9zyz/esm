var liveDate=new Date("February 6, 2016");var now=new Date;var timeDiff=now.getTime()-liveDate.getTime();var diffDays=Math.ceil(timeDiff/(1e3*3600*24));document.getElementById("system-live-time").innerHTML="System has been live for "+diffDays+" days";var histoOpts={showXLabels:10,scaleShowGridLines:true,scaleGridLineColor:"rgba(57,0,0,.05)",scaleFontColor:"rgba(255,255,255,.8)",scaleLabel:"          <%=value%>",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,bezierCurve:true,bezierCurveTension:.4,pointDot:true,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:5,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,responsive:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};var ctx=document.getElementById("historical-data-chart");updateHistoric=function(){$.ajax({url:"data/historical-data.json",success:function(result){var historicalData={labels:result.times,datasets:[{label:"My Second dataset",fillColor:"rgba(255,128,128,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:result.data}]};Chart.types.Line.extend({name:"LineAlt",draw:function(){Chart.types.Line.prototype.draw.apply(this,arguments);var ctx=this.chart.ctx;ctx.save();ctx.textAlign="center";ctx.textBaseline="bottom";ctx.fillStyle=this.options.scaleFontColor;var x=this.scale.xScalePaddingLeft*.4;var y=this.chart.height/2;ctx.translate(x,y);ctx.rotate(-90*Math.PI/180);ctx.fillText("Watts",0,0);ctx.restore()}});var container=document.getElementById("historicalCol");ctx.width=container.clientWidth;var historicalChart=new Chart(ctx.getContext("2d")).LineAlt(historicalData,histoOpts)}})};var waypoint=new Waypoint({element:document.getElementById("system-live-time"),handler:function(direction){updateHistoric();this.destroy()},offset:"bottom-in-view"});$("#historicalMonth").on("click",function(event){alert("MONTH")});$("#historicalYear").on("click",function(event){alert("YEAR")});$("#historicalAll").on("click",function(event){alert("ALL")});
